<!DOCTYPE html>
<html>
	<head>
		<title>Journal</title>
		<link rel="stylesheet" href="assets/css/app.css" />
		<meta name="viewport" content="width=320" />
		<meta http-equiv="Content-type" content="text/html; charset=UTF-8" />
		<!-- <meta name="viewport" content="width=320, initial-scale=1.0, user-scalable=no" /> -->
	</head>
	<body>
		{{if .Failure}}
			<div class="notify error"><a class="close"><i class="fa fa-close"></i></a>Error adding journal entry.</div>
		{{end}}
		{{if .Success}}
			<div class="notify"><a class="close"><i class="fa fa-close"></i></a>Journal entry added.</div>
		{{end}}
		<form class="journal-entry" method="post" action="{{.Callback}}" accept-charset="UTF-8">
			<p>
				<input type="text" id="ipt-ts" name="ts" placeholder="Timestamp" value="" />
			</p>
			<p>
				<textarea id="ipt-body" name="body" spellcheck="false" autocomplete="off" placeholder="Body"></textarea>
			</p>
			<p>
				<input type="submit" value="Save" />
			</p>
			<p id="ties">
				<a class="yesterday" href="tie/yesterday.svg"><img src="tie/yesterday.svg" /></a>
				<a class="today" href="tie/today.svg"><img src="tie/today.svg" /></a>
				<a class="tomorrow" href="tie/tomorrow.svg"><img src="tie/tomorrow.svg" /></a>
				<a class="dayaftertomorrow" href="tie/dayaftertomorrow.svg"><img src="tie/dayaftertomorrow.svg" /></a>
			</p>
		</form>
		<script>
			(function() {
				document.getElementById("ipt-body").focus();

				let ipt_ts = document.getElementById("ipt-ts");
				let zp = function(i) {
					if ( i < 10 ) {
						return "0" + i.toString();
					}
					return i.toString();
				}
				let upd_ts = function() {
					let d = new Date();
					ipt_ts.placeholder = d.getFullYear() + "-" + zp(d.getMonth() + 1) + "-" + zp(d.getDate()) + " " + zp(d.getHours()) + ":" + zp(d.getMinutes());
				};
				upd_ts();
				window.setInterval(upd_ts, 5000);
			})();
		</script>
	</body>
</html>

